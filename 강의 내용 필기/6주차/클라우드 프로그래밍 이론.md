---
sticker: emoji//270d-fe0f
tags:
  - terraform
  - κ°λ…
---

|                   | <div style="width:300px">μ •μ</div>                                                                        | λΉ„κ³                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| ----------------- | -------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| λ°λΈμµμ¤              |                                                                                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| λ°λΈμµμ¤ μ›μΉ™           |                                                                                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| CI/CD             |                                                                                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| μ½”λ“ν• μΈν”„λΌ           | μΈν”„λΌλ¥Ό μ½”λ“λ¥Ό ν†µν•΄ μ •μν•κ³  κ΄€λ¦¬ν•λ” λ°©μ‹                                                                                 | Infra: μ„λ²„, λ„¤νΈμ›ν¬, μ¤ν† λ¦¬μ§€ λ“±μ μ»΄ν“¨ν… μμ›μ„ λΉ„λ΅―ν•μ—¬ OSμ μ„¤μ •κ³Ό μ„¤μΉλ  λΌμ΄λΈλ¬λ¦¬ λ“± μ†ν”„νΈμ›¨μ–΄ μ‹¤ν–‰μ— ν•„μ”ν• λ¨λ“  ν™κ²½                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Ad-hoc Script     | OSμ—μ„ μ‹¤ν–‰ κ°€λ¥ν• μλ™ μ‘μ—…μ„μ„ μ μ°¨μ— λ”°λΌ μ¤ν¬λ¦½νΈλ΅ λ³€ν™ν• μ¤ν¬λ¦½νΈ                                                                | μ μ€ κ·λ¨μ λ‹¨μλ°λ³µ λ° λ‹¨λ°μ„± μ‘μ—…μ— μ μ©                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Ansible           | μ—μ΄μ „νΈ μ—†μ΄ SSH κΈ°λ°μΌλ΅ μ‘λ™ν•λ” μ„λ²„ μλ™ν™” λ° κ΄€λ¦¬ λ„κµ¬λ΅, YAML κΈ°λ°μ Playbookμ„ μ‚¬μ©ν•μ—¬ μΈν”„λΌλ¥Ό μ •μν•¨                                  | Configuration Management Tool  <br>- μλ™ν™”  <br>- λ©±λ“±μ„±  <br>- λ¶„μ‚°ν™κ²½ μμ²΄ μ§€μ›                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| chef              | μΈν”„λΌ μλ™ν™” λ° κµ¬μ„± κ΄€λ¦¬ λ„κµ¬λ΅, Ruby κΈ°λ°μ DSL(Domain Specific Language)μ„ μ‚¬μ©ν•μ—¬ μ„λ²„ κµ¬μ„±κ³Ό λ°°ν¬λ¥Ό μ½”λ“λ΅ κ΄€λ¦¬                      | μ΅ν• μΈν”„λΌ ν™κ²½μ—μ„ μ²΄κ³„μ μΈ κ΄€λ¦¬κ°€ κ°€λ¥ν•λ©°, μ—μ΄μ „νΈλ¥Ό ν†µν•΄ κ° λ…Έλ“μ— κµ¬μ„± μ •λ³΄λ¥Ό μ μ©                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Puppet            | μ„ μ–Έμ  μ–Έμ–΄λ¥Ό μ‚¬μ©ν•μ—¬ μΈν”„λΌ λ° μ• ν”λ¦¬μΌ€μ΄μ… κµ¬μ„±μ„ μλ™ν™”ν•λ” λ„κµ¬                                                                   | λ€κ·λ¨ μΈν”„λΌμ μ¤‘μ•™ μ§‘μ¤‘μ‹ κ΄€λ¦¬μ— μ ν•©ν•λ©°, μ—μ΄μ „νΈ κΈ°λ°/μ—μ΄μ „νΈλ¦¬μ¤ μµμ…μ„ λ¨λ‘ μ κ³µ                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Saltstack         | μΈν”„λΌ μλ™ν™”, κµ¬μ„± κ΄€λ¦¬, μ›κ²© μ‹¤ν–‰ λ„κµ¬λ΅ λΉ λ¥Έ μ‘μ—… μν–‰κ³Ό λ€κ·λ¨ ν™κ²½ κ΄€λ¦¬μ— μ ν•©ν• λ„κµ¬                                                    | μ‹¤μ‹κ°„ λ°μ΄ν„° μμ§‘ λ° μ΄λ²¤νΈ κΈ°λ° μλ™ν™” κΈ°λ¥μ„ μ κ³µν•λ©°, μ—μ΄μ „νΈ κΈ°λ°κ³Ό μ—μ΄μ „νΈλ¦¬μ¤ λ¨λ“λ¥Ό λ¨λ‘ μ§€μ›                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Packer            | μλ™ν™”λ λ¨Έμ‹  μ΄λ―Έμ§€(AMI, VHD, Docker Image λ“±) λΉλ“λ¥Ό μ§€μ›ν•λ” λ„κµ¬  <br>μ—¬λ¬ ν”λ«νΌμ— λ€ν•΄ λ™μΌν• μ‹μ¤ν… μ΄λ―Έμ§€λ¥Ό μ‘μ„±ν•κΈ° μ„ν• μ¤ν” μ†μ¤ λ„κµ¬          | Hasicorpμ—μ„ λ§λ“  μΈν”„λΌ κ΄€λ¦¬ λ„κµ¬ μ¤‘ ν•λ‚μ΄λ‹¤.  <br>AWS, VirtualBox λ° VMμ›¨μ–΄μ™€ κ°™μ€ κ°€μƒ λ¨Έμ‹ μ μ΄λ―Έμ§€, λ„μ»¤ λ“± μ»¨ν…μ΄λ„ μ΄λ―Έμ§€λ„ μƒμ„±μ΄ κ°€λ¥ν•λ‹¤.                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Vagrant           | κ°€μƒ λ¨Έμ‹  ν™κ²½μ μƒμ„± λ° μ μ§€λ³΄μλ¥Ό μ„ν• μ¤ν” μ†μ¤ μ†ν”„νΈμ›¨μ–΄                                                                      | μ»¤λ§¨λ“ ν•λ‚λ΅ κ°€μƒ κµ¬μ¶•μ΄ μ™„λ£λλ‹¤.  <br>κ°€μƒ λ¨Έμ‹  μ„¤μ •μ΄ κ°„λ‹¨ν•λ‹¤.  <br>ν™κ²½ κµ¬μ¶•μ„ μλ™ν™”ν•  μ μλ‹¤.                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Terraform         | ν΄λΌμ°λ“ λ¦¬μ†μ¤λ¥Ό μλ™μΌλ΅ μƒμ„±, ν”„λ΅λΉ„μ €λ‹ λ° κ΄€λ¦¬ν•λ” λ° μ‚¬μ©ν•λ” IaC λ„κµ¬                                                            | λ‹¤μ–‘ν• ν΄λΌμ°λ“(AWS, Azure, GCP λ“±) λ° μ¨ν”„λ λ―Έμ¤ ν™κ²½μ„ μ§€μ›ν•λ‹¤.  <br>μƒνƒ κ΄€λ¦¬λ¥Ό ν†µν•΄ μΈν”„λΌ λ³€κ²½ μ‚¬ν•­ μ¶”μ μ΄ κ°€λ¥ν•λ‹¤.                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| CloudFormation    | AWS μΈν”„λΌλ¥Ό μ½”λ“λ΅ κ΄€λ¦¬ν•λ” IaC μ„λΉ„μ¤                                                                                | ν…λΌνΌκ³Ό λ‹¬λ¦¬ AWS μ „μ©  <br>μΈν”„λΌ κ΄€λ¦¬ κ°„μ†ν™”  <br>μ‹ μ†ν• μΈν”„λΌ λ³µμ   <br>μΈν”„λΌ λ³€κ²½ μ‚¬ν•­μ„ μ‰½κ² μ μ–΄ λ° μ¶”μ                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Opensstack        | ν΄λΌμ°λ“ μΈν”„λΌλ¥Ό κµ¬μ¶•ν•κ³  κ΄€λ¦¬ν•λ” μ¤ν”μ†μ¤ ν”λ«νΌ, AWS, Azure, GCP κ°™μ€ νΌλΈ”λ¦­ ν΄λΌμ°λ“μ™€ μ μ‚¬ν• κΈ°λ¥μ„ μ κ³µν•μ§€λ§, μμ²΄μ μΌλ΅ ν”„λΌμ΄λΉ— ν΄λΌμ°λ“λ¥Ό κµ¬μ¶•ν•  μ μλ„λ΅ μ„¤κ³„λ¨ | λ‹¤λ‹μ—μ΄ ν΄λΌμ°λ“ λ™μ‘ λ°©λ²• μ΄ν•΄ μ•λλ©΄ ν• λ² ν•΄λ³΄λΌκ³  κ°•μ¶”ν•μ‹¬.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Terraform μ…λ ¥λ³€μ    | κµ¬μ„± νμΌμ—μ„ κ°’μ„ λ™μ μΌλ΅ μ„¤μ •ν•  μ μλ„λ΅ ν•΄μ£Όλ” κΈ°λ¥. ν•λ“μ½”λ”©μ„ ν”Όν•κ³ , κ°™μ€ μ½”λ“λ¥Ό λ‹¤μ–‘ν• ν™κ²½μ—μ„ μ‰½κ² μ¬μ‚¬μ©ν•  μ μλ„λ΅ λ„μ™€μ¤                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Terraform μ¶λ ¥λ³€μ    | λ°°ν¬λ λ¦¬μ†μ¤μ μ •λ³΄λ¥Ό ν™•μΈν•κ±°λ‚ λ‹¤λ¥Έ ν…λΌνΌ κµ¬μ„±μ—μ„ μ°Έμ΅°ν•  λ• μ μ©ν•κ² μ‚¬μ©, output λΈ”λ΅μ„ μ‚¬μ©ν•΄ μ •μ                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| resource<br>(ν…λΌνΌ) | μ‹¤μ  ν΄λΌμ°λ“ μΈν”„λΌμ κ°λ³„ κµ¬μ„± μ”μ†                                                                                    | ex) EC2, S3, RDS λ“±                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| module<br>(ν…λΌνΌ)   | ν•λ‚ μ΄μƒμ `.tf` νμΌλ΅ κµ¬μ„±λ λ””λ ‰ν„°λ¦¬μ΄λ©°, νΉμ • μΈν”„λΌ λ¦¬μ†μ¤λ¥Ό κ·Έλ£Ήν™”ν•μ—¬ κ΄€λ¦¬ν•  μ μλ„λ΅ ν•¨.  <br>μ΄λ¥Ό ν†µν•΄ μ½”λ“λ¥Ό ν¨μ¨μ μΌλ΅ κ΄€λ¦¬ν•κ³  μ μ§€λ³΄μμ„±μ„ λ†’μΌ μ μμ.    | Terraformμ€ λ¨λ“μ„ μ§μ ‘ μ‘μ„±ν•  μλ„ μμ§€λ§, Terraform Registryμ—μ„ μ κ³µν•λ” λ¨λ“μ„ μ‚¬μ©ν•  μλ„ μμ.([https://registry.terraform.io/providers/hashicorp/aws/latest](https://registry.terraform.io/providers/hashicorp/aws/latest))  <br>  <br>code:  <br>  <br>`module "s3_bucket" {   source = "terraform-aws-modules/s3-bucket/aws"      bucket = "my-s3-bucket"   acl = "private"      control_object_ownership = true   object_ownership  = "ObjectWriter"      versioning = {   enabled = true   }   }   `  <br>(μ„μ μ½”λ“μ— κ²½μ° Terraform Registryμ—μ„ κ°€μ Έμ¨ κ²ƒ) |
| data<br>(ν…λΌνΌ)     | dataλ” Terraform μ™Έλ¶€μ—μ„ μ΄λ―Έ μ΅΄μ¬ν•λ” λ¦¬μ†μ¤λ¥Ό μ΅°νν•  λ• μ‚¬μ©.                                                              | code:  <br>  <br>`data "aws_ami" "latest_amazon_linux" {   most_recent = true   owners = ["amazon"]      filter {   name = "name"   values = ["amzn2-ami-hvm-*-x86_64-gp2"]}   }      `use:  <br>  <br>`resource "aws_instance" "example" {   ami = data.aws_ami.latest_amazon_linux.id   instance_type = "t2.micro"   }      `                                                                                                                                                                                               |
| variable<br>(ν…λΌνΌ) | `variable` λΈ”λ΅μ€ μ…λ ¥κ°’μ„ μ •μν•λ” λ° μ‚¬μ©. ν•λ“μ½”λ”©μ„ ν”Όν•κ³  Terraform κµ¬μ„±μ„ λ” μ μ—°ν•κ² λ§λ“λ” μ—­ν• .                                    | code:  <br>  <br>`variable "instance_type" {   description = "EC2 instance type"   type = string   default = "t2.micro"   }   `  <br>use:  <br>  <br>`resource "aws_instance" "example" {   ami = "ami-12345678"   instance_type = var.instance_type   }   `                                                                                                                                                                                                                                                                  |
| output<br>(ν…λΌνΌ)   | `output` λΈ”λ΅μ€ λ¦¬μ†μ¤μ μ†μ„± κ°’μ„ μ¶λ ¥ν•λ” λ° μ‚¬μ©.                                                                       | code :  <br>  <br>`output "instance_public_ip" {   description = "EC2 instance public IP"   value = aws_instance.example.public_ip   }      `result:  <br>  <br>`Apply complete! Resources: 1 added, 0 changed, 0 destroyed.      Outputs:      instance_public_ip = "34.229.54.111"   `                                                                                                                                                                                                                                      |
# Terraform State
: terraformμ—μ„ applyλ¥Ό μν–‰ν•  λ• λ¨λ“  μΈν”„λΌμ μ •λ³΄λ¥Ό μ €μ¥ν•λ” μƒνƒ νμΌμ΄ μƒμ„±λ¨.
- tfstate ν™•μ¥μλ¥Ό κ°–λ” νμΌμ„ μλ™μΌλ΅ μƒμ„±/μμ •
- μƒνƒ νμΌκ³Ό ν„μ¬ AWS κ³„μ •μ— λ°μλ μΈν”„λΌμ μƒνƒλ¥Ό λΉ„κµν•λ” λ°©μ‹μΌλ΅ λ³€κ²½μ‚¬ν•­ νμ•…
- μƒνƒ νμΌμ„ μ €μ¥ν•λ” κ³µμ  μ €μ¥μ†λ¥Ό λ‘μ–΄ ν‘μ—… ν”„λ΅μ νΈμ—μ„ μ‚¬μ©
> [!warning] μ£Όμ
> TerraformμΌλ΅ μƒμ„±ν• λ¦¬μ†μ¤λ” κ·Έ μ™Έμ λ°©λ²•μΌλ΅ μμ • κΈμ§€.
> μƒνƒ νμΌκ³Ό μ‹¤μ  λ¦¬μ†μ¤μ μƒνƒκ°€ λ‹¬λΌμ§€λ©΄ λ¬Έμ κ°€ λ°μƒν•  μ μμ. 

> [!NOTE] λ‘ μ‚¬λμ΄ λ™μ‹μ— applyλ¥Ό ν•λ‹¤λ©΄?
> λ¨Όμ € apply ν• μ‚¬λμ μ‘μ—…μ΄ λλ‚λ©΄ λ’¤μ— apply ν• μ‚¬λμ μ‘μ—…μ΄ μν–‰λλ‹¤. μ΄λ• stateλ” λ’¤μ— μ‘μ—…ν• μ‚¬λμ λ‚΄μ©μΌλ΅ λ®μ–΄μ¨μ Έ λ°μ΄ν„° μ†μ‹¤μ΄ μΌμ–΄λ‚  μ μλ‹¤.

- κ³µμ μ €μ¥μ†λ” **Amazon S3**, Azure Storage, Hashicorp Consul, Terraform Pro λ“±μ—μ„ μ§€μ›
- **Amazon S3**μ—μ„λ” Fully managed μ„λΉ„μ¤λΌμ„ μ¶”κ°€μ μΈ κ΄€λ¦¬ λΉ„μ©μ—†μ΄ κ³µμ  μ €μ¥μ†λ΅ μ‚¬μ© κ°€λ¥

> [!info] Terraform μ μ©ν•λ” μμ„
> 1. μ›ν¬μ¤νμ΄μ¤ μƒμ„±
> 2. terraform init
> 3. terraform plan -> λ³€κ²½μ‚¬ν•­ ν™•μΈ
> 4. terraform apply (confirmμ„ μ¤¬μ„ λ•λ§ λ³€κ²½λκ² μλ™μΌλ΅ μ‹¤ν–‰)

# λ°λΈμµμ¤μ CI/CD

![](images/Pasted%20image%2020250318104656.png)

1οΈβƒ£ **μ½”λ“ μ»¤λ°‹**
- κ°λ°μκ°€ μ½”λ“ μ €μ¥μ†(Git)μ— μ½”λ“ ν‘Έμ‹
- Terraform IaC νμΌ(`main.tf`) λ³€κ²½ κ°€λ¥
2οΈβƒ£ **Build (CI λ‹¨κ³„)**
- `terraform init`, `terraform validate`λ΅ μ΄κΈ°ν™” λ° μ½”λ“ κ²€μ¦
- λΉλ“ μ„λ²„μ—μ„ μ‹¤ν–‰, μΈν”„λΌ μ½”λ“ μ¤λ¥ ν™•μΈ
3οΈβƒ£ **Unit Test**
- Terraform μ½”λ“ μ¤νƒ€μΌ λ° κµ¬λ¬Έ κ²€μ‚¬ (`tflint`, `terraform validate`)
- `terratest`λ¥Ό μ΄μ©ν•΄ μΈν”„λΌ ν…μ¤νΈ κ°€λ¥
4οΈβƒ£ **Staging ν™κ²½ λ°°ν¬**
- `terraform apply`λ΅ ν…μ¤νΈ ν™κ²½μ— μΈν”„λΌ λ°°ν¬
- ν†µν•© ν…μ¤νΈ(Integration Test) λ° λ¶€ν• ν…μ¤νΈ μν–‰
5οΈβƒ£ **μ΄μ ν™κ²½ λ°°ν¬ (CD λ‹¨κ³„)**
- ν…μ¤νΈ ν†µκ³Ό μ‹ `terraform apply`λ΅ μ΄μ μ„λ²„μ— λ°μ
- **μ‚¬μ©μ μΉμΈ ν•„μ” μ‹ Continuous Delivery, μλ™ λ°°ν¬ μ‹ Continuous Deployment** π€

# Terraform μ½”λ“ κ΄€λ¦¬
- Code repository λ° λΉλ“ ν™κ²½μ΄ ν•„μ”(μ½”λ“μ΄κΈ° λ•λ¬Έ)
- ν…μ¤νΈ ν™κ²½μ΄ ν•„μ”(λ°°ν¬μ κ²°κ³Όλ¬Όμ€ μΈν”„λΌ)
